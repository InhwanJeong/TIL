## 1. 사용자 수에 따른 규모 확장성
- 단일 서버
    - 모든 컴포넌트가 한대의 서버에서 실행되는 서버
    - e.g. 웹 앱, DB, 캐시
    
- 데이터베이스
    - 관계형 데이터 베이스(relational database)
      - 테이블과 열, 칼럼으로 표현되는 DB
    - 비 관계형 DB
      - 일반적으로 조인 연산을 지원하지 않음
      - key-value store, graph store, column store, document store
      - 사용처 
          - 아주 낮은 응답 지연시간(latency)이 요구됨
          - 다루는 데이터가 비정형이라 관계형 데이터가 아님
          - 데이터를(json, yaml, xml)를 직렬화 하거나 역직렬화할 수 있기만 하면 됨
          - 아주 많은 양의 데이터를 저장할 필요가 있음
    
- 수직적 규모확장
    - 스케일 업(scale up)이라고도 하는 이 작업은 서버의 자원(cpu, ram)을 추가하는 행위를 말함
    - 서버로 유입되는 트래픽의 양이 적을때 사용(단순하고 쉬움)
    - 단점
        - 확장에 한계가 있음
        - 장애에 대한 자동복구(failover)나 다중화(redundancy) 방안이 없음, 즉 장애 발생시 서버가 죽음

- 수평적 규모확장
    - 스케일 아웃(scale out)이라고도 하는 이작업은 서버의 개수를 추가하여 성능을 개선하는 행위이다.
    - 로드밸런서를 도입하여 규모를 확장함. 자동복구와 다중화 지원
    
- 데이터베이스 다중화
    - 원본은 (주)서버, 사본은 (부)서버에 저장하는 방식이다.
    - (주)서버는 쓰기 연산만 지원된다.(insert, delete, update)
    - (부)서버는 읽기 연산만 지원된다.(select)
    - 다중화의 장점
        - 병렬로 처리될 수 있는 질의(query)의 수가 늘어나 성능이 좋아진다.
        - 안정성(reliability)이 증가한다.
        - 하나의 데이터베이스 서버에 장애가 발생해도 다른 서버에 있는 데이터를 가져와서 사용하기 떄문에 가용성(availability)이 증가한다.
          
- 캐시
    - 값비싼 연산 결과 또는 자주 참조되는 데이터를 메모리에 두고 빨리 처리될 수 있도록 하는 저장소이다.
    - e.g. 웹 서비스 새로고침을 할 때 DB호출 대신 캐시 데이터를 주면 성능 및 DB 호출 문제를 완화한다.
    - 주도형 캐시 전략(read-through caching strategy)
    - 캐시 유의사항
        - 데이터 갱신이 자주 일어나지 않는 참조 데이터
        - 캐시 데이터 만료 정책을 마련
        - 단일 장애지점(Single Point of Failure, SPOF)을 피하기 위해 캐시 다중화 마련
        - 캐시 메모리 크기, 캐시 메모리가 작으면 데이터가 캐시에서 방출된다.
        - 데이터 방출(eviction) 정책 마련
            - 캐시가 가득찼을때 기존 데이터를 내보내야 함
            - LRU(Least Recently used, 제일 오래 사용되지 않은 데이터)
            - LFU(Least Frequently used, 사용빈도가 낮은 데이터)
            - FIFO(First in First out)
    
- 콘텐츠 전송 네트워크(CDN)
    - 정적 컨텐츠(이미지, 비디오, css, javascript 파일 등)를 캐싱 후 다중화
    - 클라이언트가 가장 가까운 CDN 서버로부터 데이터를 전달 받음
    - CDN 고려사항
        - 비용, CDN은 제 3사업자에 의해 운영되며 데이터 전송 양에 따라 요금을 내게 된다.
            - 자주 사용되지 않는 콘텐츠는 CDN에서 빼는 것을 고려한다.
        - 적절한 만료 시한 설정
        - CDN 장애에 대한 대처 방안: CDN이 죽었을 때 원본에서 들고갈 수 있도록 대처하는 것이 중요
        - 콘텐츠 무효화(invalidation)방법: 
            - CDN 서비스 사업자가 제공하는 API를 이용하여 콘텐츠 무효화
            - 콘텐츠 다른 버전을 서비스할 수 있도록 오브젝트 버저닝이용