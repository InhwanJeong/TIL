## 메시지 인증 코드(Message Authentication Code, MAC)
- 일방향 해시 함수로 무결성 검증 후 올바른 사용자가 보냈는지 인증한다.

#### 메시지 인증
- 메시지 인증이란, "메시지가 올바른 송신자로부터 온것이다"라는 성질

###### 예시
- A은행은 **무결성 확인과 인증이** 필요하다
  - 무결성확인: 일방향 해시 함수
  - 인증: 메시지 인증, 디지털 서명

#### 메시지 인증 코드 이용 순서

#### 메시지 인증 코드의 키 배송 문제
- 공개키 암호
- Diffie-Hellman 키 교환
- 키 배포센터

<br>
<br>

## 메시지 인증 코드 이용 예

#### SWIFT
- Society for Worldwide Internet Financial Telecommunication
- 은행과 은행은 SWIFT를 통해서 거래 메시지 교환

#### Ipsec
- 인터넷 기반의 통신 프로토콜인 IP에 보안 기능을 첨가한 것
  - TCP와 IP사이에서 동작한다.
- 통신 내용 인증과 무결성을 위해 메시지 인증코드를 이용

#### SSL/TLS
- 웹에서 온라인 쇼핑을 할 떄 사용되는 통신 프로토콜

<br>
<br>

## 메시지 인증 코드의 실현 방법

#### 일방향 해시 함수를 이용한 실현
- HMAC(Hashed MAC)

#### 블록 암호를 이용한 실현
- 트리플 DES나 AES와 같은 블록암호를 사용해서 메시지 인증 코드를 실현
  - 블록 암호 키를 공유키로 사용
  - CBC모드로 메시지 전체를 암호화
  - 메시지 인증 코드에서는 복호화를 할 필요가 없으므로 최종 블록 이외는 폐기
  - 최종 블록을 MAC값으로 이용


<br>
<br>

## HMAC
- 일방향 해시 함수를 이용한 메시지 인증 코드


## 메시지 인증 코드에 대한 공격

#### 재전송 공격
- 도청을 보존해서 보존해둔 메시지와 MAC값을 반복해서 송신
- 재전송 공격 방버
  - 순서 번호(sequence number)
    - 송싱 메시지에 매회 1씩 증가하는 번호(순서번호,sequence number)를 붙이기
    - 마지막 통신시 순서번호를 저장
  - 타임스탬프(timestamp)
    - 송신 메시지에 현재 시각 넣기
    - 송수신자 사ㅣ의 동기화 필요
  - 비표(nonce)
    - 송신자에게 일회용의 랜덤한 값을 전송
    - 메시지와 비표를 합해 MAC 값을 계산
    - 비표 값은 통신 때마다 교체

#### 키의 추측에 의한 공격
- 메시지 인증 코드에 대한 공격
  - 전사공격
  - 생일 공격
- MAC 값만 획득한 공격자가 키를 추측하지 못하도록 해야 한다.
  - 해시 함수의 일방향성
  - 해시 함수의 충돌 내성

<br>
<br>


## 메시지 인증 코드로 해결할 수 없는 문제

#### 제 3자에 대한 증명
- 앨리스로부터 메시지를 받은 밥이 "이 메시지는 앨리스가 보낸 것이다."라는 것을 제삼자인 검증자 빅터에게 증명할 수 없다.
  - 이유
    - 일단 키를 빅터에게 알려줘야 한다
    - 앨리스와 밥 모두가 키를 가지고 있으므로 둘 중 누가 작성했는지 말할 수 없다.

#### 부인 방지
- 보냈지만 보내지 않았다 또는 받았지만 받지 않았다고 하는 것이 부인(repudiation)
- 메시지 인증 코드로는 부인방지(nonrepudiation)를 할 방법이 없다

<br>
<br>
